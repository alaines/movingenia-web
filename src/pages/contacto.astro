---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import SectionTitle from '../components/SectionTitle.astro';
---

<Layout 
  title="Contacto" 
  description="Cont√°ctanos para conversar sobre tu proyecto de movilidad urbana. Tel√©fono, email y formulario de contacto."
>
  <Hero 
    title="Cont√°ctanos"
    subtitle="¬øTienes un proyecto o desaf√≠o relacionado con movilidad y tr√°nsito? Conversemos."
    height="medium"
  />

  <section class="section">
    <div class="container">
      <div class="contact-grid">
        <!-- Informaci√≥n de contacto -->
        <div class="contact-info">
          <SectionTitle 
            title="Informaci√≥n de Contacto"
            align="left"
          />
          
          <div class="contact-item">
            <div class="contact-icon">üìû</div>
            <div class="contact-details">
              <h4>Tel√©fono</h4>
              <a href="tel:+51963552850">+51 963 552 850</a>
            </div>
          </div>
          
          <div class="contact-item">
            <div class="contact-icon">üìß</div>
            <div class="contact-details">
              <h4>Email</h4>
              <a href="mailto:contacto@movingenia.com">contacto@movingenia.com</a>
            </div>
          </div>
          
          <div class="contact-item">
            <div class="contact-icon">üìç</div>
            <div class="contact-details">
              <h4>Ubicaci√≥n</h4>
              <p>Lima, Per√∫</p>
            </div>
          </div>

          <div class="office-hours">
            <h4>Horario de atenci√≥n</h4>
            <p>Lunes a Viernes: 9:00 - 18:00</p>
            <p class="note">Respondemos mensajes dentro de 24 horas h√°biles</p>
          </div>
        </div>

        <!-- Formulario de contacto -->
        <div class="contact-form-wrapper">
          <form class="contact-form" id="contactForm" method="POST" action="/api/contact">
            <div class="form-group">
              <label for="name" class="form-label">Nombre completo *</label>
              <input 
                type="text" 
                id="name" 
                name="name" 
                class="form-input" 
                required 
                placeholder="Tu nombre"
              />
            </div>
            
            <div class="form-group">
              <label for="email" class="form-label">Email *</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                class="form-input" 
                required 
                placeholder="tu@email.com"
              />
            </div>
            
            <div class="form-group">
              <label for="phone" class="form-label">Tel√©fono</label>
              <input 
                type="tel" 
                id="phone" 
                name="phone" 
                class="form-input" 
                placeholder="+51 999 999 999"
              />
            </div>
            
            <div class="form-group">
              <label for="subject" class="form-label">Asunto *</label>
              <input 
                type="text" 
                id="subject" 
                name="subject" 
                class="form-input" 
                required 
                placeholder="Motivo de tu consulta"
              />
            </div>
            
            <div class="form-group">
              <label for="message" class="form-label">Mensaje *</label>
              <textarea 
                id="message" 
                name="message" 
                class="form-textarea" 
                required 
                placeholder="Cu√©ntanos sobre tu proyecto o consulta..."
              ></textarea>
            </div>

            <!-- Honeypot anti-spam (oculto) -->
            <div style="position: absolute; left: -5000px;" aria-hidden="true">
              <input type="text" name="website" tabindex="-1" autocomplete="off" />
            </div>
            
            <button type="submit" class="btn btn-cta btn-lg">
              Enviar mensaje
            </button>

            <p class="form-note">
              * Campos obligatorios. Tus datos ser√°n tratados de acuerdo a nuestra <a href="/legal">Pol√≠tica de Privacidad</a>.
            </p>
          </form>

          <div id="formMessage" class="form-message" style="display: none;"></div>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  .contact-grid {
    display: grid;
    grid-template-columns: 1fr 1.5fr;
    gap: var(--space-3xl);
    max-width: 1200px;
    margin: 0 auto;
  }
  
  .contact-info {
    background: white;
    padding: var(--space-xl);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--color-border);
    height: fit-content;
  }
  
  .contact-item {
    display: flex;
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
  }
  
  .contact-icon {
    font-size: 2rem;
    flex-shrink: 0;
  }
  
  .contact-details h4 {
    font-size: var(--text-base);
    color: var(--color-text-secondary);
    margin-bottom: var(--space-xs);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-size: var(--text-sm);
  }
  
  .contact-details a {
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--color-primary);
    text-decoration: none;
  }
  
  .contact-details a:hover {
    text-decoration: underline;
  }
  
  .contact-details p {
    font-size: var(--text-lg);
    color: var(--color-text);
    margin: 0;
  }
  
  .office-hours {
    background: var(--color-background);
    padding: var(--space-lg);
    border-radius: var(--radius-md);
    margin-top: var(--space-xl);
  }
  
  .office-hours h4 {
    color: var(--color-primary);
    margin-bottom: var(--space-sm);
  }
  
  .office-hours p {
    margin-bottom: var(--space-xs);
    color: var(--color-text);
  }
  
  .office-hours .note {
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
    font-style: italic;
    margin-top: var(--space-sm);
  }
  
  .contact-form-wrapper {
    background: white;
    padding: var(--space-2xl);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    border: 1px solid var(--color-border);
  }
  
  .contact-form button[type="submit"] {
    width: 100%;
    margin-top: var(--space-md);
  }
  
  .form-note {
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
    text-align: center;
    margin-top: var(--space-md);
    line-height: 1.6;
  }
  
  .form-note a {
    color: var(--color-primary);
    text-decoration: underline;
  }
  
  .form-message {
    margin-top: var(--space-lg);
    padding: var(--space-md);
    border-radius: var(--radius-md);
    text-align: center;
    font-weight: 600;
  }
  
  .form-message.success {
    background: #d1fae5;
    color: #065f46;
    border: 1px solid #34d399;
  }
  
  .form-message.error {
    background: #fee2e2;
    color: #991b1b;
    border: 1px solid #f87171;
  }
  
  @media (max-width: 968px) {
    .contact-grid {
      grid-template-columns: 1fr;
    }
  }
</style>

<script>
  // Manejo del formulario (FASE 5 - por ahora solo validaci√≥n client-side)
  const form = document.getElementById('contactForm') as HTMLFormElement;
  const formMessage = document.getElementById('formMessage') as HTMLDivElement;
  
  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    // Por ahora solo mostramos mensaje (FASE 5 implementar√° env√≠o real)
    formMessage.textContent = 'Formulario de contacto se implementar√° en FASE 5. Por favor contacta directamente a: contacto@movingenia.com';
    formMessage.className = 'form-message error';
    formMessage.style.display = 'block';
    
    // TODO FASE 5: Implementar env√≠o a API backend
    /*
    const formData = new FormData(form);
    const response = await fetch('/api/contact', {
      method: 'POST',
      body: formData
    });
    
    if (response.ok) {
      formMessage.textContent = '¬°Mensaje enviado! Te contactaremos pronto.';
      formMessage.className = 'form-message success';
      form.reset();
    } else {
      formMessage.textContent = 'Error al enviar. Intenta de nuevo.';
      formMessage.className = 'form-message error';
    }
    formMessage.style.display = 'block';
    */
  });
</script>
